<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Single Gooey Image (No Text, No Nonsense)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --card-size: 520px; }
    body {
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; margin: 0; background: #111215;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .imageContainer {
      position: relative;
      width: var(--card-size); height: var(--card-size);
      max-width: 92vw; aspect-ratio: 1 / 1;
      overflow: hidden; border-radius: 12px;
      display: grid; place-items: center;
      background: #000; filter: saturate(0);
      transition: filter .5s ease;
    }
    .imageContainer:hover { filter: saturate(100%); }
    .imageContainer > * {
      position: absolute; inset: 0;
      width: 100% !important; height: 100% !important; object-fit: cover;
    }
    .imageContainer canvas { display: block; z-index: 1; }
  </style>
</head>
<body>
  <!-- The one and only image card -->
  <div class="imageContainer" id="imageContainer1">
    <img id="myImage1" src="https://assets.codepen.io/9051928/palm-tree.jpg" alt="Palm Tree" />
  </div>

  <!-- THREE.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    function initImageEffect(containerId, imageId) {
      const imageContainer = document.getElementById(containerId);
      const imageElement   = document.getElementById(imageId);

      let easeFactor = 0.02;
      let scene, camera, renderer, planeMesh;
      let mousePosition       = { x: 0.5, y: 0.5 };
      let targetMousePosition = { x: 0.5, y: 0.5 };
      let aberrationIntensity = 0.0;
      let prevPosition        = { x: 0.5, y: 0.5 };

      const vertexShader = `
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }`;

      const fragmentShader = `
        varying vec2 vUv;
        uniform sampler2D u_texture;
        uniform vec2 u_mouse;
        uniform vec2 u_prevMouse;
        uniform float u_aberrationIntensity;

        void main() {
          vec2 gridUV = floor(vUv * vec2(20.0, 20.0)) / vec2(20.0, 20.0);
          vec2 centerOfPixel = gridUV + vec2(1.0/20.0, 1.0/20.0);

          vec2 mouseDirection = u_mouse - u_prevMouse;
          vec2 pixelToMouseDirection = centerOfPixel - u_mouse;

          float pixelDistanceToMouse = length(pixelToMouseDirection);
          float strength = smoothstep(0.3, 0.0, pixelDistanceToMouse);

          vec2 uvOffset = strength * -mouseDirection * 0.2;
          vec2 uv = vUv - uvOffset;

          vec4 colorR = texture2D(u_texture, uv + vec2(strength * u_aberrationIntensity * 0.01, 0.0));
          vec4 colorG = texture2D(u_texture, uv);
          vec4 colorB = texture2D(u_texture, uv - vec2(strength * u_aberrationIntensity * 0.01, 0.0));

          gl_FragColor = vec4(colorR.r, colorG.g, colorB.b, 1.0);
        }`;

      function initializeScene(texture) {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(
          80,
          imageContainer.clientWidth / imageContainer.clientHeight,
          0.01, 10
        );
        camera.position.z = 1;

        const shaderUniforms = {
          u_mouse:               { value: new THREE.Vector2() },
          u_prevMouse:           { value: new THREE.Vector2() },
          u_aberrationIntensity: { value: 0.0 },
          u_texture:             { value: texture }
        };

        planeMesh = new THREE.Mesh(
          new THREE.PlaneGeometry(2, 2),
          new THREE.ShaderMaterial({
            uniforms: shaderUniforms,
            vertexShader,
            fragmentShader
          })
        );
        scene.add(planeMesh);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        sizeToContainer();
        imageContainer.appendChild(renderer.domElement);

        animateScene();
      }

      function sizeToContainer() {
        const w = imageContainer.clientWidth;
        const h = imageContainer.clientHeight;
        if (!renderer) return;
        renderer.setSize(w, h, false);
        camera.aspect = w / h;
        camera.updateProjectionMatrix();
      }

      function animateScene() {
        requestAnimationFrame(animateScene);
        mousePosition.x += (targetMousePosition.x - mousePosition.x) * easeFactor;
        mousePosition.y += (targetMousePosition.y - mousePosition.y) * easeFactor;

        planeMesh.material.uniforms.u_mouse.value.set(mousePosition.x, 1.0 - mousePosition.y);
        planeMesh.material.uniforms.u_prevMouse.value.set(prevPosition.x, 1.0 - prevPosition.y);

        aberrationIntensity = Math.max(0.0, aberrationIntensity - 0.05);
        planeMesh.material.uniforms.u_aberrationIntensity.value = aberrationIntensity;

        renderer.render(scene, camera);
      }

      const loader = new THREE.TextureLoader();
      loader.load(imageElement.src, (texture) => {
        texture.minFilter = THREE.LinearFilter;
        texture.magFilter = THREE.LinearFilter;
        initializeScene(texture);
      });

      imageContainer.addEventListener("mousemove", (event) => {
        easeFactor = 0.02;
        const rect = imageContainer.getBoundingClientRect();
        prevPosition = { ...targetMousePosition };
        targetMousePosition.x = (event.clientX - rect.left) / rect.width;
        targetMousePosition.y = (event.clientY - rect.top) / rect.height;
        aberrationIntensity = 1;
      });

      imageContainer.addEventListener("mouseenter", (event) => {
        easeFactor = 0.02;
        const rect = imageContainer.getBoundingClientRect();
        mousePosition.x = targetMousePosition.x = (event.clientX - rect.left) / rect.width;
        mousePosition.y = targetMousePosition.y = (event.clientY - rect.top) / rect.height;
      });

      imageContainer.addEventListener("mouseleave", () => {
        easeFactor = 0.05;
        targetMousePosition = { ...prevPosition };
      });

      window.addEventListener("resize", sizeToContainer);
    }

    // Fire up the lone superstar
    initImageEffect("imageContainer1", "myImage1");
  </script>
</body>
</html>
