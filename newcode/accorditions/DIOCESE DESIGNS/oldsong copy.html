<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Audio Gallery with Modal Player</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body { background: #f8f9fa; }

    .audio-thumbnail {
      position: relative;
      cursor: pointer;
      overflow: hidden;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transition: transform 0.3s ease;
    }
    .audio-thumbnail:hover { transform: scale(1.03); }
    .audio-thumbnail img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 15px;
    }
    .play-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.55);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .audio-thumbnail:hover .play-overlay { opacity: 1; }
    .play-overlay i { font-size: 70px; color: white; }

    /* Modal Styling */
    .modal-content {
      border-radius: 20px;
      overflow: hidden;
    }
    .modal-header {
      border-bottom: none;
      justify-content: flex-end;
    }
    .progress-container {
      width: 100%;
      height: 10px;
      background: #e9ecef;
      border-radius: 6px;
      cursor: pointer;
      margin: 20px 0;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #007bff, #00c6ff);
      width: 0%;
      border-radius: 6px;
      transition: width 0.1s linear;
    }
    .controls button {
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 20px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
      transition: transform 0.2s;
    }
    .controls button:hover { transform: scale(1.1); }
    .song-footer {
      background: #f1f3f5;
      padding: 10px;
      border-top: 1px solid #dee2e6;
      font-weight: 500;
    }
  </style>
</head>
<body class="p-4">

<div class="container">
  <div class="row g-4">
    <!-- Song 1 -->
    <div class="col-md-4">
      <div class="audio-thumbnail" data-index="0" data-bs-toggle="modal" data-bs-target="#audioModal">
        <img src="https://picsum.photos/id/1015/400/250" alt="Song 1">
        <div class="play-overlay"><i class="bi bi-play-circle-fill"></i></div>
      </div>
    </div>
    <!-- Song 2 -->
    <div class="col-md-4">
      <div class="audio-thumbnail" data-index="1" data-bs-toggle="modal" data-bs-target="#audioModal">
        <img src="https://picsum.photos/id/1025/400/250" alt="Song 2">
        <div class="play-overlay"><i class="bi bi-play-circle-fill"></i></div>
      </div>
    </div>
    <!-- Song 3 -->
    <div class="col-md-4">
      <div class="audio-thumbnail" data-index="2" data-bs-toggle="modal" data-bs-target="#audioModal">
        <img src="https://picsum.photos/id/1035/400/250" alt="Song 3">
        <div class="play-overlay"><i class="bi bi-play-circle-fill"></i></div>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="audioModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      
      <!-- Close Button -->
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body text-center">
        <img id="modalImg" src="" class="img-fluid rounded mb-3" alt="Thumbnail">
        
        <!-- Progress Bar -->
        <div class="progress-container" id="progressContainer">
          <div class="progress-bar" id="progressBar"></div>
        </div>

        <!-- Controls -->
        <div class="controls d-flex justify-content-center gap-3 my-3">
          <button class="btn btn-light" id="prevBtn"><i class="bi bi-skip-backward-fill"></i></button>
          <button class="btn btn-primary" id="playBtn"><i class="bi bi-play-fill"></i></button>
          <button class="btn btn-warning" id="pauseBtn"><i class="bi bi-pause-fill"></i></button>
          <button class="btn btn-danger" id="stopBtn"><i class="bi bi-stop-fill"></i></button>
          <button class="btn btn-light" id="nextBtn"><i class="bi bi-skip-forward-fill"></i></button>
        </div>
      </div>

      <!-- Footer with Song Title -->
      <div class="song-footer text-center" id="modalTitle">Song Title</div>
    </div>
  </div>
</div>

<!-- Hidden Audio -->
<audio id="audioPlayer"></audio>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const songs = [
  { title: "Song 1", src: "horse.mp3", img: "https://picsum.photos/id/1015/600/400" },
  { title: "Song 2", src: "horse.ogg", img: "https://picsum.photos/id/1025/600/400" },
  { title: "Song 3", src: "horse.mp3", img: "https://picsum.photos/id/1035/600/400" }
];

let currentIndex = 0;
const audio = document.getElementById("audioPlayer");
const modalTitle = document.getElementById("modalTitle");
const modalImg = document.getElementById("modalImg");
const progressBar = document.getElementById("progressBar");
const progressContainer = document.getElementById("progressContainer");

// Load selected song
function loadSong(index, autoplay = true) {
  currentIndex = index;
  const song = songs[index];
  audio.src = song.src;
  modalTitle.textContent = song.title;
  modalImg.src = song.img;
  if (autoplay) audio.play();
}

// Thumbnail click â†’ auto play
document.querySelectorAll(".audio-thumbnail").forEach(thumbnail => {
  thumbnail.addEventListener("click", function() {
    loadSong(parseInt(this.dataset.index), true);
  });
});

// Controls
document.getElementById("playBtn").addEventListener("click", () => audio.play());
document.getElementById("pauseBtn").addEventListener("click", () => audio.pause());
document.getElementById("stopBtn").addEventListener("click", () => { audio.pause(); audio.currentTime = 0; });
document.getElementById("nextBtn").addEventListener("click", () => { loadSong((currentIndex+1) % songs.length); });
document.getElementById("prevBtn").addEventListener("click", () => { loadSong((currentIndex-1 + songs.length) % songs.length); });

// Progress update
audio.addEventListener("timeupdate", () => {
  if (audio.duration) {
    const progressPercent = (audio.currentTime / audio.duration) * 100;
    progressBar.style.width = progressPercent + "%";
  }
});

// Seek in progress bar
progressContainer.addEventListener("click", (e) => {
  const width = progressContainer.clientWidth;
  const clickX = e.offsetX;
  const duration = audio.duration;
  audio.currentTime = (clickX / width) * duration;
});

// Auto play next when song ends
audio.addEventListener("ended", () => {
  loadSong((currentIndex+1) % songs.length);
});
</script>
</body>
</html>
