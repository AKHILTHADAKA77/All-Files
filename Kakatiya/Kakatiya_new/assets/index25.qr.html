<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Master - Advanced QR Code Generator & Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .logo i {
            margin-right: 10px;
            font-size: 28px;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 25px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--primary);
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 14px;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: var(--white);
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* Authentication Section */
        .auth-container {
            display: flex;
            min-height: 100vh;
        }

        .auth-left {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .auth-right {
            flex: 1;
            background: linear-gradient(135deg, #4361ee 0%, #3f37c9 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            padding: 40px;
        }

        .auth-box {
            background-color: var(--white);
            border-radius: 10px;
            padding: 40px;
            width: 100%;
            max-width: 450px;
            box-shadow: var(--shadow-lg);
        }

        .auth-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .auth-subtitle {
            color: var(--gray);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }

        .auth-links {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .auth-links a {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background-color: var(--light-gray);
        }

        .divider span {
            padding: 0 15px;
            color: var(--gray);
            font-size: 14px;
        }

        .social-login {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--light);
            color: var(--dark);
            border: 1px solid var(--light-gray);
            font-size: 20px;
            transition: all 0.3s;
        }

        .social-btn:hover {
            background-color: var(--white);
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .auth-right-content {
            text-align: center;
        }

        .auth-right-content h2 {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .auth-right-content p {
            font-size: 18px;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .feature-list {
            list-style: none;
            text-align: left;
        }

        .feature-list li {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .feature-list i {
            margin-right: 10px;
            color: var(--success);
        }

        /* Dashboard Section */
        .dashboard {
            padding: 30px 0;
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .sidebar {
            background-color: var(--white);
            border-radius: 10px;
            padding: 20px;
            height: fit-content;
            box-shadow: var(--shadow);
        }

        .user-profile {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            margin-right: 15px;
        }

        .user-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .user-info p {
            font-size: 13px;
            color: var(--gray);
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 5px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: var(--dark);
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background-color: var(--primary);
            color: var(--white);
        }

        .sidebar-menu i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .dashboard-content {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .dashboard-header h2 {
            font-size: 24px;
            font-weight: 600;
            color: var(--secondary);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: var(--light);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--gray);
        }

        .qr-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .qr-table th,
        .qr-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }

        .qr-table th {
            font-weight: 600;
            color: var(--gray);
            font-size: 14px;
            text-transform: uppercase;
        }

        .qr-table tbody tr:hover {
            background-color: var(--light);
        }

        .qr-preview {
            width: 50px;
            height: 50px;
            border-radius: 6px;
            object-fit: cover;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background-color: rgba(76, 201, 240, 0.2);
            color: var(--success);
        }

        .status-inactive {
            background-color: rgba(247, 37, 133, 0.2);
            color: var(--danger);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        /* QR Generator Section */
        .qr-generator {
            padding: 30px 0;
        }

        .generator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .generator-form {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .color-input {
            height: 50px;
            cursor: pointer;
        }

        .qr-preview-container {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .qr-preview-box {
            width: 250px;
            height: 250px;
            background-color: var(--light);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            position: relative;
        }

        .qr-preview-box img {
            max-width: 100%;
            max-height: 100%;
        }

        .qr-preview-placeholder {
            color: var(--gray);
            font-size: 18px;
        }

        /* Admin Panel */
        .admin-container {
            padding: 30px 0;
        }

        .admin-tabs {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 30px;
        }

        .admin-tab {
            padding: 15px 25px;
            font-weight: 500;
            color: var(--gray);
            border-bottom: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .admin-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .user-table {
            width: 100%;
            border-collapse: collapse;
        }

        .user-table th,
        .user-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--light-gray);
        }

        .user-avatar-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
            margin-right: 15px;
        }

        .user-info-cell {
            display: flex;
            align-items: center;
        }

        .user-details h4 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 3px;
        }

        .user-details p {
            font-size: 13px;
            color: var(--gray);
        }

        /* User Status Button */
        .user-status-btn {
            background-color: var(--light);
            border: 1px solid var(--light-gray);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .user-status-btn:hover {
            background-color: var(--primary);
            color: var(--white);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--white);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            transform: translateX(200%);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            margin-right: 15px;
            font-size: 20px;
        }

        .notification.success .notification-icon {
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--danger);
        }

        .notification-message {
            font-weight: 500;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: 10px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--secondary);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }

        .close-btn:hover {
            color: var(--dark);
        }

        /* Scan Simulator */
        .scan-simulator {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--light);
            border-radius: 8px;
            text-align: center;
        }

        .scan-simulator h4 {
            margin-bottom: 10px;
            color: var(--secondary);
        }

        .scan-simulator p {
            margin-bottom: 15px;
            color: var(--gray);
            font-size: 14px;
        }

        /* Session Indicator */
        .session-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success);
            color: var(--white);
            padding: 10px 15px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: var(--shadow-lg);
            z-index: 100;
            display: flex;
            align-items: center;
        }

        .session-indicator i {
            margin-right: 8px;
        }

        /* QR View Modal */
        .qr-view-modal .modal-content {
            max-width: 600px;
            text-align: center;
        }

        .qr-view-container {
            margin: 20px 0;
            padding: 20px;
            background-color: var(--light);
            border-radius: 10px;
            display: inline-block;
        }

        .qr-view-image {
            max-width: 100%;
            height: auto;
        }

        .qr-view-details {
            text-align: left;
            margin-top: 20px;
        }

        .qr-view-details h3 {
            margin-bottom: 15px;
            color: var(--secondary);
        }

        .qr-view-details table {
            width: 100%;
            border-collapse: collapse;
        }

        .qr-view-details td {
            padding: 8px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .qr-view-details td:first-child {
            font-weight: 500;
            width: 40%;
        }

        /* QR Edit Form */
        .qr-edit-form .form-group {
            margin-bottom: 15px;
        }

        .qr-edit-form label {
            font-weight: 500;
            margin-bottom: 5px;
            display: block;
        }

        .status-toggle {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            margin-left: 10px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--success);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Responsive */
        @media (max-width: 992px) {
            .generator-container {
                grid-template-columns: 1fr;
            }
            
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                margin-bottom: 30px;
            }
        }

        @media (max-width: 768px) {
            .auth-container {
                flex-direction: column;
            }
            
            .auth-right {
                padding: 30px 20px;
            }
            
            .header-container {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 15px;
            }
            
            nav ul li {
                margin: 0 10px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header id="main-header" style="display: none;">
        <div class="container">
            <div class="header-container">
                <div class="logo">
                    <i class="fas fa-qrcode"></i>
                    QR Master
                </div>
                <nav>
                    <ul>
                        <li><a href="#" id="dashboard-link">Dashboard</a></li>
                        <li><a href="#" id="generator-link">Generator</a></li>
                        <li><a href="#" id="admin-link" style="display: none;">Admin Panel</a></li>
                        <li><a href="#" id="logout-btn">Logout</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Authentication Section -->
    <div id="auth-container" class="auth-container">
        <div class="auth-left">
            <div class="auth-box">
                <div id="login-form">
                    <h2 class="auth-title">Welcome Back</h2>
                    <p class="auth-subtitle">Sign in to your account to continue</p>
                    
                    <form id="login-form-element">
                        <div class="form-group">
                            <label for="login-email">Email Address</label>
                            <input type="email" id="login-email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" class="form-control" placeholder="Enter your password" required>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="remember-me"> Remember me
                            </label>
                        </div>
                        
                        <button type="submit" class="btn" style="width: 100%;">Sign In</button>
                    </form>
                    
                    <div class="auth-links">
                        <a href="#" id="forgot-password-link">Forgot password?</a>
                        <a href="#" id="register-link">Create an account</a>
                    </div>
                    
                    <div class="divider">
                        <span>OR</span>
                    </div>
                    
                    <div class="social-login">
                        <button class="social-btn" id="google-login-btn">
                            <i class="fab fa-google"></i>
                        </button>
                        <button class="social-btn">
                            <i class="fab fa-facebook-f"></i>
                        </button>
                        <button class="social-btn">
                            <i class="fab fa-github"></i>
                        </button>
                    </div>
                </div>
                
                <div id="register-form" style="display: none;">
                    <h2 class="auth-title">Create Account</h2>
                    <p class="auth-subtitle">Sign up to get started with QR Master</p>
                    
                    <form id="register-form-element">
                        <div class="form-group">
                            <label for="register-name">Full Name</label>
                            <input type="text" id="register-name" class="form-control" placeholder="Enter your full name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-username">Username</label>
                            <input type="text" id="register-username" class="form-control" placeholder="Choose a username" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-email">Email Address</label>
                            <input type="email" id="register-email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-phone">Phone Number</label>
                            <input type="tel" id="register-phone" class="form-control" placeholder="Enter your phone number" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-address">Address</label>
                            <textarea id="register-address" class="form-control" rows="2" placeholder="Enter your address" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-password">Password</label>
                            <input type="password" id="register-password" class="form-control" placeholder="Create a password" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-confirm-password">Confirm Password</label>
                            <input type="password" id="register-confirm-password" class="form-control" placeholder="Confirm your password" required>
                        </div>
                        
                        <button type="submit" class="btn" style="width: 100%;">Sign Up</button>
                    </form>
                    
                    <div class="auth-links">
                        <a href="#" id="login-link">Already have an account?</a>
                    </div>
                    
                    <div class="divider">
                        <span>OR</span>
                    </div>
                    
                    <div class="social-login">
                        <button class="social-btn" id="google-register-btn">
                            <i class="fab fa-google"></i>
                        </button>
                        <button class="social-btn">
                            <i class="fab fa-facebook-f"></i>
                        </button>
                        <button class="social-btn">
                            <i class="fab fa-github"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="auth-right">
            <div class="auth-right-content">
                <h2>Advanced QR Code Management</h2>
                <p>Create, customize, and track QR codes with real-time analytics</p>
                
                <ul class="feature-list">
                    <li><i class="fas fa-check-circle"></i> Custom QR codes with your branding</li>
                    <li><i class="fas fa-check-circle"></i> Real-time scan tracking and analytics</li>
                    <li><i class="fas fa-check-circle"></i> Dynamic QR codes with editable content</li>
                    <li><i class="fas fa-check-circle"></i> Team collaboration and management</li>
                    <li><i class="fas fa-check-circle"></i> Export and integration options</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard-view" style="display: none;">
        <div class="container">
            <div class="dashboard">
                <div class="dashboard-container">
                    <div class="sidebar">
                        <div class="user-profile">
                            <div class="user-avatar" id="user-avatar">U</div>
                            <div class="user-info">
                                <h3 id="user-name">User Name</h3>
                                <p id="user-email">user@example.com</p>
                            </div>
                        </div>
                        
                        <ul class="sidebar-menu">
                            <li><a href="#" class="active" data-view="dashboard"><i class="fas fa-th-large"></i> Dashboard</a></li>
                            <li><a href="#" data-view="generator"><i class="fas fa-plus-circle"></i> Create QR Code</a></li>
                            <li><a href="#" data-view="my-qrs"><i class="fas fa-qrcode"></i> My QR Codes</a></li>
                            <li><a href="#" data-view="analytics"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                            <li><a href="#" data-view="settings"><i class="fas fa-cog"></i> Settings</a></li>
                        </ul>
                    </div>
                    
                    <div class="dashboard-content">
                        <div class="dashboard-header">
                            <h2>QR Code Dashboard</h2>
                            <div>
                                <button class="btn btn-sm btn-success" id="create-qr-btn">Create New QR Code</button>
                            </div>
                        </div>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="total-qrs">0</div>
                                <div class="stat-label">Total QR Codes</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="total-scans">0</div>
                                <div class="stat-label">Total Scans</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="active-qrs">0</div>
                                <div class="stat-label">Active QR Codes</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="recent-scans">0</div>
                                <div class="stat-label">Recent Scans (7 days)</div>
                            </div>
                        </div>
                        
                        <h3 style="margin-bottom: 15px;">Recent QR Codes</h3>
                        <table class="qr-table">
                            <thead>
                                <tr>
                                    <th>QR Code</th>
                                    <th>Name</th>
                                    <th>Created</th>
                                    <th>Scans</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recent-qrs-tbody">
                                <!-- QR codes will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Generator Section -->
    <div id="generator-view" style="display: none;">
        <div class="container">
            <div class="qr-generator">
                <div class="section-title">
                    <h2>Create Your QR Code</h2>
                    <p>Customize every aspect of your QR code to match your brand</p>
                </div>
                <div class="generator-container">
                    <div class="generator-form">
                        <form id="qr-form">
                            <div class="form-group">
                                <label for="qr-type">QR Code Type</label>
                                <select id="qr-type" class="form-control">
                                    <option value="url">Website URL</option>
                                    <option value="text">Plain Text</option>
                                    <option value="wifi">WiFi</option>
                                    <option value="vcard">Contact Card (vCard)</option>
                                    <option value="email">Email</option>
                                    <option value="sms">SMS</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="qr-content">Content</label>
                                <textarea id="qr-content" class="form-control" rows="3" placeholder="Enter URL or text" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="qr-name">QR Code Name</label>
                                <input type="text" id="qr-name" class="form-control" placeholder="Name for your reference" required>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="qr-size">Size</label>
                                    <select id="qr-size" class="form-control">
                                        <option value="200">Small (200x200)</option>
                                        <option value="300" selected>Medium (300x300)</option>
                                        <option value="400">Large (400x400)</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="error-correction">Error Correction</label>
                                    <select id="error-correction" class="form-control">
                                        <option value="L">Low (7%)</option>
                                        <option value="M" selected>Medium (15%)</option>
                                        <option value="Q">Quartile (25%)</option>
                                        <option value="H">High (30%)</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fg-color">Foreground Color</label>
                                    <input type="color" id="fg-color" class="form-control color-input" value="#000000">
                                </div>
                                
                                <div class="form-group">
                                    <label for="bg-color">Background Color</label>
                                    <input type="color" id="bg-color" class="form-control color-input" value="#ffffff">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="logo-upload">Add Logo (Optional)</label>
                                <input type="file" id="logo-upload" class="form-control" accept="image/*">
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="enable-expiration"> Enable Expiration
                                </label>
                            </div>
                            
                            <div id="expiration-options" style="display: none;">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="expire-date">Expiration Date</label>
                                        <input type="date" id="expire-date" class="form-control">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="expire-scans">Expire After Scans</label>
                                        <input type="number" id="expire-scans" class="form-control" min="1" placeholder="Number of scans">
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn" style="width: 100%; margin-top: 10px;">Generate QR Code</button>
                        </form>
                    </div>
                    
                    <div class="qr-preview-container">
                        <div class="qr-preview-box">
                            <div class="qr-preview-placeholder">
                                <i class="fas fa-qrcode" style="font-size: 80px; color: #ccc;"></i>
                                <p>Your QR code will appear here</p>
                            </div>
                        </div>
                        <div id="qr-actions" style="display: none;">
                            <button class="btn" style="margin-right: 10px;" id="download-qr-btn">Download QR Code</button>
                            <button class="btn btn-outline" id="save-qr-btn">Save to Dashboard</button>
                        </div>
                        <div id="qr-stats" style="display: none; margin-top: 20px;">
                            <h4>QR Code Statistics</h4>
                            <p>Track how many people scan your QR code</p>
                            <div class="stats-grid" style="margin-top: 15px;">
                                <div class="stat-card">
                                    <div class="stat-value" id="qr-scans-count">0</div>
                                    <div class="stat-label">Total Scans</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="qr-unique-scans">0</div>
                                    <div class="stat-label">Unique Scans</div>
                                </div>
                            </div>
                            
                            <div class="scan-simulator">
                                <h4>Test Scan Tracking</h4>
                                <p>Simulate a scan to see how the tracking works</p>
                                <button class="btn btn-sm" id="simulate-scan-btn">Simulate Scan</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="admin-view" style="display: none;">
        <div class="container">
            <div class="admin-container">
                <div class="section-title">
                    <h2>Admin Panel</h2>
                    <p>Manage users and view system statistics</p>
                </div>
                
                <div class="admin-tabs">
                    <div class="admin-tab active" data-tab="users">Users</div>
                    <div class="admin-tab" data-tab="qrs">All QR Codes</div>
                    <div class="admin-tab" data-tab="stats">System Statistics</div>
                </div>
                
                <div class="tab-content active" id="users-tab">
                    <div class="dashboard-header">
                        <h3>All Users</h3>
                        <div>
                            <button class="btn btn-sm">Export Data</button>
                        </div>
                    </div>
                    
                    <table class="user-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Email</th>
                                <th>Joined</th>
                                <th>QR Codes</th>
                                <th>Total Scans</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="users-tbody">
                            <!-- Users will be dynamically added here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="qrs-tab">
                    <div class="dashboard-header">
                        <h3>All QR Codes</h3>
                        <div>
                            <button class="btn btn-sm">Export Data</button>
                        </div>
                    </div>
                    
                    <table class="qr-table">
                        <thead>
                            <tr>
                                <th>QR Code</th>
                                <th>Name</th>
                                <th>Owner</th>
                                <th>Created</th>
                                <th>Scans</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="all-qrs-tbody">
                            <!-- QR codes will be dynamically added here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="tab-content" id="stats-tab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="total-users">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="total-system-qrs">0</div>
                            <div class="stat-label">Total QR Codes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="total-system-scans">0</div>
                            <div class="stat-label">Total Scans</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="recent-system-scans">0</div>
                            <div class="stat-label">Recent Scans (7 days)</div>
                        </div>
                    </div>
                    
                    <h3 style="margin: 30px 0 15px;">System Usage Over Time</h3>
                    <div style="background-color: var(--light); padding: 20px; border-radius: 8px; text-align: center;">
                        <p>Chart showing system usage over time will be displayed here</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Details Modal -->
    <div id="user-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">User Details</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div id="user-details-content">
                <!-- User details will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- QR View Modal -->
    <div id="qr-view-modal" class="modal qr-view-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">QR Code Details</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div id="qr-view-content">
                <!-- QR code details will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- QR Edit Modal -->
    <div id="qr-edit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit QR Code</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div id="qr-edit-content">
                <!-- QR edit form will be dynamically added here -->
            </div>
        </div>
    </div>

    <!-- Session Indicator -->
    <div id="session-indicator" class="session-indicator" style="display: none;">
        <i class="fas fa-user-check"></i>
        <span id="session-text">Active Session</span>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <div class="notification-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="notification-message">Success!</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <script>
        // Mock database for demonstration
        const mockDatabase = {
            users: [
                { 
                    id: 1, 
                    name: 'John Doe', 
                    username: 'johndoe',
                    email: 'john@example.com', 
                    phone: '+1234567890',
                    address: '123 Main St, City, Country',
                    password: 'password123', 
                    isAdmin: true, 
                    joined: '2023-01-15' 
                },
                { 
                    id: 2, 
                    name: 'Jane Smith', 
                    username: 'janesmith',
                    email: 'jane@example.com', 
                    phone: '+1234567891',
                    address: '456 Elm St, City, Country',
                    password: 'password123', 
                    isAdmin: false, 
                    joined: '2023-02-20' 
                },
                { 
                    id: 3, 
                    name: 'Bob Johnson', 
                    username: 'bobjohnson',
                    email: 'bob@example.com', 
                    phone: '+1234567892',
                    address: '789 Oak St, City, Country',
                    password: 'password123', 
                    isAdmin: false, 
                    joined: '2023-03-10' 
                }
            ],
            qrCodes: [
                { id: 1, userId: 1, name: 'Summer Sale', type: 'url', content: 'https://example.com/summer-sale', created: '2023-06-12', scans: 42, status: 'active' },
                { id: 2, userId: 1, name: 'Product Brochure', type: 'url', content: 'https://example.com/brochure', created: '2023-06-05', scans: 28, status: 'active' },
                { id: 3, userId: 2, name: 'Event Registration', type: 'url', content: 'https://example.com/event', created: '2023-05-28', scans: 76, status: 'inactive' },
                { id: 4, userId: 2, name: 'Restaurant Menu', type: 'url', content: 'https://example.com/menu', created: '2023-05-15', scans: 15, status: 'active' },
                { id: 5, userId: 3, name: 'WiFi Access', type: 'wifi', content: 'WIFI:S:MyNetwork;T:WPA;P:MyPassword;;', created: '2023-04-30', scans: 8, status: 'active' }
            ],
            scans: [
                { id: 1, qrId: 1, timestamp: '2023-06-15 10:30:22', ipAddress: '192.168.1.1', userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36' },
                { id: 2, qrId: 1, timestamp: '2023-06-15 11:45:10', ipAddress: '192.168.1.2', userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_6 like Mac OS X) AppleWebKit/605.1.15' },
                { id: 3, qrId: 2, timestamp: '2023-06-14 09:15:33', ipAddress: '192.168.1.3', userAgent: 'Mozilla/5.0 (Android 11; Mobile; rv:68.0) Gecko/68.0 Firefox/88.0' }
            ]
        };

        // Current user state
        let currentUser = null;
        let currentQrCode = null;
        let currentLogoImage = null;

        // DOM elements
        const authContainer = document.getElementById('auth-container');
        const mainHeader = document.getElementById('main-header');
        const dashboardView = document.getElementById('dashboard-view');
        const generatorView = document.getElementById('generator-view');
        const adminView = document.getElementById('admin-view');
        const notification = document.getElementById('notification');
        const sessionIndicator = document.getElementById('session-indicator');
        const sessionText = document.getElementById('session-text');

        // Authentication forms
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const loginFormElement = document.getElementById('login-form-element');
        const registerFormElement = document.getElementById('register-form-element');

        // Form toggles
        const loginLink = document.getElementById('login-link');
        const registerLink = document.getElementById('register-link');
        const forgotPasswordLink = document.getElementById('forgot-password-link');

        // Social login buttons
        const googleLoginBtn = document.getElementById('google-login-btn');
        const googleRegisterBtn = document.getElementById('google-register-btn');

        // Navigation
        const dashboardLink = document.getElementById('dashboard-link');
        const generatorLink = document.getElementById('generator-link');
        const adminLink = document.getElementById('admin-link');
        const logoutBtn = document.getElementById('logout-btn');

        // Dashboard elements
        const userAvatar = document.getElementById('user-avatar');
        const userName = document.getElementById('user-name');
        const userEmail = document.getElementById('user-email');
        const totalQrs = document.getElementById('total-qrs');
        const totalScans = document.getElementById('total-scans');
        const activeQrs = document.getElementById('active-qrs');
        const recentScans = document.getElementById('recent-scans');
        const recentQrsTbody = document.getElementById('recent-qrs-tbody');
        const createQrBtn = document.getElementById('create-qr-btn');

        // QR Generator elements
        const qrForm = document.getElementById('qr-form');
        const qrType = document.getElementById('qr-type');
        const qrContent = document.getElementById('qr-content');
        const qrName = document.getElementById('qr-name');
        const qrSize = document.getElementById('qr-size');
        const errorCorrection = document.getElementById('error-correction');
        const fgColor = document.getElementById('fg-color');
        const bgColor = document.getElementById('bg-color');
        const logoUpload = document.getElementById('logo-upload');
        const enableExpiration = document.getElementById('enable-expiration');
        const expirationOptions = document.getElementById('expiration-options');
        const expireDate = document.getElementById('expire-date');
        const expireScans = document.getElementById('expire-scans');
        const qrPreviewBox = document.querySelector('.qr-preview-box');
        const qrPlaceholder = document.querySelector('.qr-preview-placeholder');
        const qrActions = document.getElementById('qr-actions');
        const qrStats = document.getElementById('qr-stats');
        const downloadQrBtn = document.getElementById('download-qr-btn');
        const saveQrBtn = document.getElementById('save-qr-btn');
        const simulateScanBtn = document.getElementById('simulate-scan-btn');
        const qrScansCount = document.getElementById('qr-scans-count');
        const qrUniqueScans = document.getElementById('qr-unique-scans');

        // Admin panel elements
        const adminTabs = document.querySelectorAll('.admin-tab');
        const usersTab = document.getElementById('users-tab');
        const qrsTab = document.getElementById('qrs-tab');
        const statsTab = document.getElementById('stats-tab');
        const usersTbody = document.getElementById('users-tbody');
        const allQrsTbody = document.getElementById('all-qrs-tbody');
        const totalUsers = document.getElementById('total-users');
        const totalSystemQrs = document.getElementById('total-system-qrs');
        const totalSystemScans = document.getElementById('total-system-scans');
        const recentSystemScans = document.getElementById('recent-system-scans');

        // Modal elements
        const userDetailsModal = document.getElementById('user-details-modal');
        const userDetailsContent = document.getElementById('user-details-content');
        const qrViewModal = document.getElementById('qr-view-modal');
        const qrViewContent = document.getElementById('qr-view-content');
        const qrEditModal = document.getElementById('qr-edit-modal');
        const qrEditContent = document.getElementById('qr-edit-content');
        const closeModalBtns = document.querySelectorAll('.close-btn');

        // Initialize the application
        function init() {
            // Check if user is already logged in (persistent session)
            checkPersistentSession();
            
            // Set up event listeners
            setupEventListeners();
        }

        // Check for persistent session
        function checkPersistentSession() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    
                    // Verify user still exists in database
                    const userExists = mockDatabase.users.some(u => u.id === currentUser.id);
                    if (userExists) {
                        // Restore the last view if available
                        const lastView = localStorage.getItem('lastView') || 'dashboard';
                        showNotification(`Welcome back, ${currentUser.name}!`, 'success');
                        
                        // Show the appropriate view
                        switch(lastView) {
                            case 'dashboard':
                                showDashboard();
                                break;
                            case 'generator':
                                showGenerator();
                                break;
                            case 'admin':
                                showAdminPanel();
                                break;
                            default:
                                showDashboard();
                        }
                    } else {
                        // User no longer exists in database, clear session
                        clearSession();
                    }
                } catch (error) {
                    // Invalid user data, clear session
                    clearSession();
                }
            }
        }

        // Clear user session
        function clearSession() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('lastView');
            sessionIndicator.style.display = 'none';
        }

        // Set up event listeners
        function setupEventListeners() {
            // Authentication form toggles
            loginLink.addEventListener('click', (e) => {
                e.preventDefault();
                showLoginForm();
            });
            registerLink.addEventListener('click', (e) => {
                e.preventDefault();
                showRegisterForm();
            });

            // Form submissions
            loginFormElement.addEventListener('submit', handleLogin);
            registerFormElement.addEventListener('submit', handleRegister);

            // Social login buttons
            googleLoginBtn.addEventListener('click', handleGoogleLogin);
            googleRegisterBtn.addEventListener('click', handleGoogleRegister);

            // Navigation
            dashboardLink.addEventListener('click', (e) => {
                e.preventDefault();
                showDashboard();
            });
            generatorLink.addEventListener('click', (e) => {
                e.preventDefault();
                showGenerator();
            });
            adminLink.addEventListener('click', (e) => {
                e.preventDefault();
                showAdminPanel();
            });
            logoutBtn.addEventListener('click', handleLogout);

            // Dashboard
            createQrBtn.addEventListener('click', (e) => {
                e.preventDefault();
                showGenerator();
            });

            // QR Generator
            qrForm.addEventListener('submit', handleQrGeneration);
            enableExpiration.addEventListener('change', (e) => {
                expirationOptions.style.display = e.target.checked ? 'block' : 'none';
            });

            qrType.addEventListener('change', (e) => {
                // Update placeholder based on type
                switch(e.target.value) {
                    case 'url':
                        qrContent.placeholder = 'https://example.com';
                        break;
                    case 'text':
                        qrContent.placeholder = 'Enter your text here';
                        break;
                    case 'wifi':
                        qrContent.placeholder = 'WiFi network details';
                        break;
                    case 'vcard':
                        qrContent.placeholder = 'Contact information';
                        break;
                    case 'email':
                        qrContent.placeholder = 'email@example.com';
                        break;
                    case 'sms':
                        qrContent.placeholder = 'Phone number and message';
                        break;
                }
            });

            logoUpload.addEventListener('change', handleLogoUpload);
            downloadQrBtn.addEventListener('click', handleDownloadQr);
            saveQrBtn.addEventListener('click', handleSaveQr);
            simulateScanBtn.addEventListener('click', handleSimulateScan);

            // Admin panel tabs
            adminTabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    const tabName = e.target.dataset.tab;
                    switchAdminTab(tabName);
                });
            });

            // Sidebar menu
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const view = e.target.dataset.view;
                    
                    // Update active menu item
                    document.querySelectorAll('.sidebar-menu a').forEach(item => {
                        item.classList.remove('active');
                    });
                    e.target.classList.add('active');
                    
                    // Show the appropriate view
                    switch(view) {
                        case 'dashboard':
                            showDashboard();
                            break;
                        case 'generator':
                            showGenerator();
                            break;
                        case 'my-qrs':
                            showMyQrs();
                            break;
                        case 'analytics':
                            showAnalytics();
                            break;
                        case 'settings':
                            showSettings();
                            break;
                    }
                });
            });

            // Modal close buttons
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.target.closest('.modal').style.display = 'none';
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
        }

        // Authentication functions
        function showLoginForm() {
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
        }

        function showRegisterForm() {
            loginForm.style.display = 'none';
            registerForm.style.display = 'block';
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const rememberMe = document.getElementById('remember-me').checked;
            
            // Find user in mock database
            const user = mockDatabase.users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                
                // Save session to localStorage
                localStorage.setItem('currentUser', JSON.stringify(user));
                
                // If remember me is checked, extend session duration
                if (rememberMe) {
                    // In a real app, you might set a longer expiration or use refresh tokens
                    localStorage.setItem('rememberMe', 'true');
                } else {
                    localStorage.removeItem('rememberMe');
                }
                
                showNotification('Login successful!', 'success');
                showDashboard();
            } else {
                showNotification('Invalid email or password', 'error');
            }
        }

        function handleRegister(e) {
            e.preventDefault();
            
            const name = document.getElementById('register-name').value;
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const phone = document.getElementById('register-phone').value;
            const address = document.getElementById('register-address').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }
            
            // Check if user already exists
            const existingUser = mockDatabase.users.find(u => u.email === email || u.username === username);
            if (existingUser) {
                showNotification('User with this email or username already exists', 'error');
                return;
            }
            
            // Create new user
            const newUser = {
                id: mockDatabase.users.length + 1,
                name,
                username,
                email,
                phone,
                address,
                password,
                isAdmin: false,
                joined: new Date().toISOString().split('T')[0]
            };
            
            mockDatabase.users.push(newUser);
            currentUser = newUser;
            
            // Save session to localStorage
            localStorage.setItem('currentUser', JSON.stringify(newUser));
            
            showNotification('Registration successful!', 'success');
            showDashboard();
        }

        function handleGoogleLogin() {
            // In a real app, this would integrate with Google OAuth
            // For demo purposes, we'll simulate a successful login with a Google account
            currentUser = {
                id: 999,
                name: 'Google User',
                username: 'googleuser',
                email: 'googleuser@gmail.com',
                phone: '+1234567899',
                address: 'Google HQ, Mountain View, CA',
                isAdmin: false,
                joined: new Date().toISOString().split('T')[0],
                isGoogleUser: true
            };
            
            // Save session to localStorage
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            showNotification('Google login successful!', 'success');
            showDashboard();
        }

        function handleGoogleRegister() {
            // Similar to handleGoogleLogin but for registration
            handleGoogleLogin();
        }

        function handleLogout() {
            // Clear session
            clearSession();
            
            // Show notification
            showNotification('You have been logged out', 'success');
            
            // Show auth container
            authContainer.style.display = 'flex';
            mainHeader.style.display = 'none';
            dashboardView.style.display = 'none';
            generatorView.style.display = 'none';
            adminView.style.display = 'none';
            
            // Reset forms
            loginFormElement.reset();
            registerFormElement.reset();
            showLoginForm();
        }

        // View functions
        function showDashboard() {
            if (!currentUser) return;
            
            // Save current view
            localStorage.setItem('lastView', 'dashboard');
            
            // Update UI
            authContainer.style.display = 'none';
            mainHeader.style.display = 'block';
            dashboardView.style.display = 'block';
            generatorView.style.display = 'none';
            adminView.style.display = 'none';
            
            // Update session indicator
            sessionIndicator.style.display = 'flex';
            sessionText.textContent = `Logged in as ${currentUser.name}`;
            
            // Update user info
            userAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
            userName.textContent = currentUser.name;
            userEmail.textContent = currentUser.email;
            
            // Show/hide admin link
            adminLink.style.display = currentUser.isAdmin ? 'block' : 'none';
            
            // Load user's QR codes
            loadUserQrCodes();
            
            // Update stats
            updateUserStats();
        }

        function showGenerator() {
            if (!currentUser) return;
            
            // Save current view
            localStorage.setItem('lastView', 'generator');
            
            // Update UI
            authContainer.style.display = 'none';
            mainHeader.style.display = 'block';
            dashboardView.style.display = 'none';
            generatorView.style.display = 'block';
            adminView.style.display = 'none';
            
            // Update session indicator
            sessionIndicator.style.display = 'flex';
            sessionText.textContent = `Logged in as ${currentUser.name}`;
            
            // Reset form
            qrForm.reset();
            qrPreviewBox.innerHTML = `
                <div class="qr-preview-placeholder">
                    <i class="fas fa-qrcode" style="font-size: 80px; color: #ccc;"></i>
                    <p>Your QR code will appear here</p>
                </div>
            `;
            qrActions.style.display = 'none';
            qrStats.style.display = 'none';
            expirationOptions.style.display = 'none';
            currentLogoImage = null;
        }

        function showAdminPanel() {
            if (!currentUser || !currentUser.isAdmin) return;
            
            // Save current view
            localStorage.setItem('lastView', 'admin');
            
            // Update UI
            authContainer.style.display = 'none';
            mainHeader.style.display = 'block';
            dashboardView.style.display = 'none';
            generatorView.style.display = 'none';
            adminView.style.display = 'block';
            
            // Update session indicator
            sessionIndicator.style.display = 'flex';
            sessionText.textContent = `Logged in as ${currentUser.name}`;
            
            // Load admin data
            loadAdminData();
        }

        function showMyQrs() {
            // In a real app, this would show a detailed view of all user's QR codes
            showNotification('My QR Codes view would be implemented here', 'success');
        }

        function showAnalytics() {
            // In a real app, this would show detailed analytics for the user's QR codes
            showNotification('Analytics view would be implemented here', 'success');
        }

        function showSettings() {
            // In a real app, this would show user settings
            showNotification('Settings view would be implemented here', 'success');
        }

        // QR Code functions
        function handleLogoUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = new Image();
                    img.onload = function() {
                        currentLogoImage = img;
                        showNotification('Logo uploaded successfully!', 'success');
                    };
                    img.src = event.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        function handleQrGeneration(e) {
            e.preventDefault();
            
            // Clear previous QR code
            qrPreviewBox.innerHTML = '';
            
            // Create new QR code
            const qrcode = new QRCode(qrPreviewBox, {
                text: qrContent.value,
                width: parseInt(qrSize.value),
                height: parseInt(qrSize.value),
                colorDark: fgColor.value,
                colorLight: bgColor.value,
                correctLevel: QRCode.CorrectLevel[errorCorrection.value]
            });
            
            // Store QR code data for later use
            currentQrCode = {
                name: qrName.value,
                type: qrType.value,
                content: qrContent.value,
                size: qrSize.value,
                fgColor: fgColor.value,
                bgColor: bgColor.value,
                errorCorrection: errorCorrection.value,
                expiration: {
                    enabled: enableExpiration.checked,
                    date: expireDate.value,
                    scans: expireScans.value
                }
            };
            
            // Add logo if uploaded
            if (currentLogoImage) {
                setTimeout(() => {
                    addLogoToQR();
                }, 300);
            }
            
            // Show actions and stats
            qrActions.style.display = 'block';
            qrStats.style.display = 'block';
            
            // Reset scan count for new QR
            qrScansCount.textContent = '0';
            qrUniqueScans.textContent = '0';
            
            showNotification('QR code generated successfully!', 'success');
        }

        function addLogoToQR() {
            const canvas = qrPreviewBox.querySelector('canvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const size = parseInt(qrSize.value);
            const logoSize = size * 0.2; // Logo size is 20% of QR code size
            
            // Calculate position to center the logo
            const x = (size - logoSize) / 2;
            const y = (size - logoSize) / 2;
            
            // Draw logo with rounded corners
            ctx.save();
            ctx.beginPath();
            ctx.roundRect(x, y, logoSize, logoSize, 10);
            ctx.clip();
            ctx.drawImage(currentLogoImage, x, y, logoSize, logoSize);
            ctx.restore();
            
            // Add white border around logo
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.roundRect(x, y, logoSize, logoSize, 10);
            ctx.stroke();
        }

        function handleDownloadQr() {
            const canvas = qrPreviewBox.querySelector('canvas');
            if (!canvas) {
                showNotification('Please generate a QR code first', 'error');
                return;
            }
            
            const link = document.createElement('a');
            link.download = `${currentQrCode.name || 'qrcode'}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            showNotification('QR code downloaded successfully!', 'success');
        }

        function handleSaveQr() {
            if (!currentQrCode) {
                showNotification('Please generate a QR code first', 'error');
                return;
            }
            
            // In a real app, this would save to the database
            const newQr = {
                id: mockDatabase.qrCodes.length + 1,
                userId: currentUser.id,
                name: currentQrCode.name,
                type: currentQrCode.type,
                content: currentQrCode.content,
                created: new Date().toISOString().split('T')[0],
                scans: 0,
                status: 'active'
            };
            
            mockDatabase.qrCodes.push(newQr);
            
            showNotification('QR code saved to your dashboard!', 'success');
            
            // Redirect to dashboard after a short delay
            setTimeout(() => {
                showDashboard();
            }, 1500);
        }

        function handleSimulateScan() {
            if (!currentQrCode) {
                showNotification('Please generate a QR code first', 'error');
                return;
            }
            
            // Increment scan count
            const currentScans = parseInt(qrScansCount.textContent);
            qrScansCount.textContent = currentScans + 1;
            
            // Simulate unique scan (50% chance)
            if (Math.random() > 0.5) {
                const currentUnique = parseInt(qrUniqueScans.textContent);
                qrUniqueScans.textContent = currentUnique + 1;
            }
            
            showNotification('Scan simulated successfully!', 'success');
        }

        // Dashboard functions
        function loadUserQrCodes() {
            // Get user's QR codes
            const userQrCodes = mockDatabase.qrCodes.filter(qr => qr.userId === currentUser.id);
            
            // Clear table
            recentQrsTbody.innerHTML = '';
            
            // Add QR codes to table
            userQrCodes.slice(0, 5).forEach(qr => {
                const row = document.createElement('tr');
                
                // Create a small QR code for the table
                const qrCodeContainer = document.createElement('div');
                qrCodeContainer.className = 'qr-preview';
                qrCodeContainer.style.width = '50px';
                qrCodeContainer.style.height = '50px';
                
                // Generate QR code
                new QRCode(qrCodeContainer, {
                    text: qr.content,
                    width: 50,
                    height: 50,
                    colorDark: '#000000',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.M
                });
                
                row.innerHTML = `
                    <td></td>
                    <td>${qr.name}</td>
                    <td>${qr.created}</td>
                    <td>${qr.scans}</td>
                    <td><span class="status-badge status-${qr.status}">${qr.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-outline view-qr-btn" data-qr-id="${qr.id}">View</button>
                            <button class="btn btn-sm btn-outline edit-qr-btn" data-qr-id="${qr.id}">Edit</button>
                        </div>
                    </td>
                `;
                
                // Add the QR code to the first cell
                row.cells[0].appendChild(qrCodeContainer);
                
                recentQrsTbody.appendChild(row);
            });
            
            // If no QR codes, show a message
            if (userQrCodes.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" style="text-align: center; padding: 20px; color: var(--gray);">
                        You haven't created any QR codes yet. <a href="#" id="create-first-qr" style="color: var(--primary);">Create your first QR code</a>
                    </td>
                `;
                recentQrsTbody.appendChild(row);
                
                // Add event listener to the create link
                document.getElementById('create-first-qr').addEventListener('click', (e) => {
                    e.preventDefault();
                    showGenerator();
                });
            }
            
            // Add event listeners to view buttons
            document.querySelectorAll('.view-qr-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const qrId = parseInt(e.target.dataset.qrId);
                    showQrDetails(qrId);
                });
            });
            
            // Add event listeners to edit buttons
            document.querySelectorAll('.edit-qr-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const qrId = parseInt(e.target.dataset.qrId);
                    showEditQrForm(qrId);
                });
            });
        }

        function updateUserStats() {
            // Get user's QR codes
            const userQrCodes = mockDatabase.qrCodes.filter(qr => qr.userId === currentUser.id);
            
            // Calculate stats
            const totalQrCount = userQrCodes.length;
            const totalScanCount = userQrCodes.reduce((sum, qr) => sum + qr.scans, 0);
            const activeQrCount = userQrCodes.filter(qr => qr.status === 'active').length;
            
            // For recent scans, we'll simulate a count
            const recentScanCount = Math.floor(totalScanCount * 0.3); // 30% of total scans
            
            // Update UI
            totalQrs.textContent = totalQrCount;
            totalScans.textContent = totalScanCount;
            activeQrs.textContent = activeQrCount;
            recentScans.textContent = recentScanCount;
        }

        // Admin panel functions
        function loadAdminData() {
            // Load users
            loadUsers();
            
            // Load all QR codes
            loadAllQrCodes();
            
            // Load system stats
            loadSystemStats();
        }

        function loadUsers() {
            // Clear table
            usersTbody.innerHTML = '';
            
            // Add users to table
            mockDatabase.users.forEach(user => {
                const userQrCodes = mockDatabase.qrCodes.filter(qr => qr.userId === user.id);
                const totalScans = userQrCodes.reduce((sum, qr) => sum + qr.scans, 0);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <div class="user-info-cell">
                            <div class="user-avatar-small">${user.name.charAt(0).toUpperCase()}</div>
                            <div class="user-details">
                                <h4>${user.name}</h4>
                                <p>${user.isAdmin ? 'Admin' : 'User'}</p>
                            </div>
                        </div>
                    </td>
                    <td>${user.email}</td>
                    <td>${user.joined}</td>
                    <td>${userQrCodes.length}</td>
                    <td>${totalScans}</td>
                    <td><span class="status-badge status-active">Active</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm user-status-btn" data-user-id="${user.id}">View Status</button>
                            <button class="btn btn-sm ${user.isAdmin ? 'btn-danger' : 'btn-outline'}">${user.isAdmin ? 'Revoke Admin' : 'Make Admin'}</button>
                        </div>
                    </td>
                `;
                
                usersTbody.appendChild(row);
            });
            
            // Add event listeners to status buttons
            document.querySelectorAll('.user-status-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = parseInt(e.target.dataset.userId);
                    showUserDetails(userId);
                });
            });
        }

        function loadAllQrCodes() {
            // Clear table
            allQrsTbody.innerHTML = '';
            
            // Add QR codes to table
            mockDatabase.qrCodes.forEach(qr => {
                const user = mockDatabase.users.find(u => u.id === qr.userId);
                
                // Create a small QR code for the table
                const qrCodeContainer = document.createElement('div');
                qrCodeContainer.className = 'qr-preview';
                qrCodeContainer.style.width = '50px';
                qrCodeContainer.style.height = '50px';
                
                // Generate QR code
                new QRCode(qrCodeContainer, {
                    text: qr.content,
                    width: 50,
                    height: 50,
                    colorDark: '#000000',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.M
                });
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td></td>
                    <td>${qr.name}</td>
                    <td>${user ? user.name : 'Unknown'}</td>
                    <td>${qr.created}</td>
                    <td>${qr.scans}</td>
                    <td><span class="status-badge status-${qr.status}">${qr.status}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-outline view-qr-btn" data-qr-id="${qr.id}">View</button>
                            <button class="btn btn-sm btn-outline edit-qr-btn" data-qr-id="${qr.id}">Edit</button>
                        </div>
                    </td>
                `;
                
                // Add the QR code to the first cell
                row.cells[0].appendChild(qrCodeContainer);
                
                allQrsTbody.appendChild(row);
            });
            
            // Add event listeners to view buttons
            document.querySelectorAll('#all-qrs-tbody .view-qr-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const qrId = parseInt(e.target.dataset.qrId);
                    showQrDetails(qrId);
                });
            });
            
            // Add event listeners to edit buttons
            document.querySelectorAll('#all-qrs-tbody .edit-qr-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const qrId = parseInt(e.target.dataset.qrId);
                    showEditQrForm(qrId);
                });
            });
        }

        function loadSystemStats() {
            // Calculate system stats
            const userCount = mockDatabase.users.length;
            const qrCount = mockDatabase.qrCodes.length;
            const scanCount = mockDatabase.qrCodes.reduce((sum, qr) => sum + qr.scans, 0);
            
            // For recent scans, we'll simulate a count
            const recentScanCount = Math.floor(scanCount * 0.2); // 20% of total scans
            
            // Update UI
            totalUsers.textContent = userCount;
            totalSystemQrs.textContent = qrCount;
            totalSystemScans.textContent = scanCount;
            recentSystemScans.textContent = recentScanCount;
        }

        function switchAdminTab(tabName) {
            // Update active tab
            adminTabs.forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // Update active tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        function showUserDetails(userId) {
            const user = mockDatabase.users.find(u => u.id === userId);
            if (!user) return;
            
            const userQrCodes = mockDatabase.qrCodes.filter(qr => qr.userId === userId);
            const totalScans = userQrCodes.reduce((sum, qr) => sum + qr.scans, 0);
            
            userDetailsContent.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <div class="user-avatar-small" style="margin-right: 15px; width: 60px; height: 60px; font-size: 24px;">${user.name.charAt(0).toUpperCase()}</div>
                    <div>
                        <h3>${user.name}</h3>
                        <p>${user.email}</p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-value">${userQrCodes.length}</div>
                        <div class="stat-label">QR Codes Generated</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${totalScans}</div>
                        <div class="stat-label">Total Scans</div>
                    </div>
                </div>
                
                <h4 style="margin-bottom: 10px;">User Information</h4>
                <table style="width: 100%; margin-bottom: 20px;">
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Username:</td>
                        <td style="padding: 8px;">${user.username}</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Email:</td>
                        <td style="padding: 8px;">${user.email}</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Phone:</td>
                        <td style="padding: 8px;">${user.phone}</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Address:</td>
                        <td style="padding: 8px;">${user.address}</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Joined:</td>
                        <td style="padding: 8px;">${user.joined}</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Role:</td>
                        <td style="padding: 8px;">${user.isAdmin ? 'Administrator' : 'User'}</td>
                    </tr>
                </table>
                
                <h4 style="margin-bottom: 10px;">Recent QR Codes</h4>
                <div style="max-height: 200px; overflow-y: auto;">
                    ${userQrCodes.length > 0 ? 
                        userQrCodes.slice(0, 3).map(qr => `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid var(--light-gray);">
                                <div>
                                    <div style="font-weight: 500;">${qr.name}</div>
                                    <div style="font-size: 13px; color: var(--gray);">Created: ${qr.created}</div>
                                </div>
                                <div>
                                    <span class="status-badge status-${qr.status}">${qr.status}</span>
                                    <span style="margin-left: 10px;">${qr.scans} scans</span>
                                </div>
                            </div>
                        `).join('') : 
                        '<p style="padding: 10px; color: var(--gray);">No QR codes generated yet</p>'
                    }
                </div>
            `;
            
            userDetailsModal.style.display = 'flex';
        }

        function showQrDetails(qrId) {
            const qr = mockDatabase.qrCodes.find(q => q.id === qrId);
            if (!qr) return;
            
            const user = mockDatabase.users.find(u => u.id === qr.userId);
            
            // Create a container for the QR code
            const qrCodeContainer = document.createElement('div');
            qrCodeContainer.className = 'qr-view-container';
            
            // Generate QR code
            new QRCode(qrCodeContainer, {
                text: qr.content,
                width: 200,
                height: 200,
                colorDark: '#000000',
                colorLight: '#ffffff',
                correctLevel: QRCode.CorrectLevel.M
            });
            
            qrViewContent.innerHTML = `
                <div class="qr-view-container">
                    ${qrCodeContainer.innerHTML}
                </div>
                
                <div class="qr-view-details">
                    <h3>QR Code Information</h3>
                    <table>
                        <tr>
                            <td>Name</td>
                            <td>${qr.name}</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td>${qr.type}</td>
                        </tr>
                        <tr>
                            <td>Content</td>
                            <td>${qr.content}</td>
                        </tr>
                        <tr>
                            <td>Created</td>
                            <td>${qr.created}</td>
                        </tr>
                        <tr>
                            <td>Owner</td>
                            <td>${user ? user.name : 'Unknown'}</td>
                        </tr>
                        <tr>
                            <td>Scans</td>
                            <td>${qr.scans}</td>
                        </tr>
                        <tr>
                            <td>Status</td>
                            <td><span class="status-badge status-${qr.status}">${qr.status}</span></td>
                        </tr>
                    </table>
                    
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn btn-sm" id="download-qr-${qr.id}">Download</button>
                        <button class="btn btn-sm btn-outline edit-qr-btn" data-qr-id="${qr.id}">Edit</button>
                    </div>
                </div>
            `;
            
            // Add event listener to download button
            setTimeout(() => {
                const downloadBtn = document.getElementById(`download-qr-${qr.id}`);
                if (downloadBtn) {
                    downloadBtn.addEventListener('click', () => {
                        const canvas = qrCodeContainer.querySelector('canvas');
                        if (canvas) {
                            const link = document.createElement('a');
                            link.download = `${qr.name || 'qrcode'}.png`;
                            link.href = canvas.toDataURL('image/png');
                            link.click();
                            showNotification('QR code downloaded successfully!', 'success');
                        }
                    });
                }
                
                // Add event listener to edit button
                const editBtn = qrViewContent.querySelector('.edit-qr-btn');
                if (editBtn) {
                    editBtn.addEventListener('click', () => {
                        qrViewModal.style.display = 'none';
                        showEditQrForm(qrId);
                    });
                }
            }, 100);
            
            qrViewModal.style.display = 'flex';
        }

        function showEditQrForm(qrId) {
            const qr = mockDatabase.qrCodes.find(q => q.id === qrId);
            if (!qr) return;
            
            qrEditContent.innerHTML = `
                <form class="qr-edit-form" id="edit-qr-form">
                    <input type="hidden" id="edit-qr-id" value="${qr.id}">
                    
                    <div class="form-group">
                        <label for="edit-qr-name">QR Code Name</label>
                        <input type="text" id="edit-qr-name" class="form-control" value="${qr.name}" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="edit-qr-content">Content</label>
                        <textarea id="edit-qr-content" class="form-control" rows="3" required>${qr.content}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Status</label>
                        <div class="status-toggle">
                            <span>Inactive</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="edit-qr-status" ${qr.status === 'active' ? 'checked' : ''}>
                                <span class="toggle-slider"></span>
                            </label>
                            <span>Active</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn" style="width: 100%;">Save Changes</button>
                    </div>
                </form>
            `;
            
            // Add event listener to form submission
            setTimeout(() => {
                const editForm = document.getElementById('edit-qr-form');
                if (editForm) {
                    editForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        
                        const qrId = parseInt(document.getElementById('edit-qr-id').value);
                        const name = document.getElementById('edit-qr-name').value;
                        const content = document.getElementById('edit-qr-content').value;
                        const status = document.getElementById('edit-qr-status').checked ? 'active' : 'inactive';
                        
                        // Update QR code in database
                        const qrIndex = mockDatabase.qrCodes.findIndex(q => q.id === qrId);
                        if (qrIndex !== -1) {
                            mockDatabase.qrCodes[qrIndex].name = name;
                            mockDatabase.qrCodes[qrIndex].content = content;
                            mockDatabase.qrCodes[qrIndex].status = status;
                            
                            showNotification('QR code updated successfully!', 'success');
                            qrEditModal.style.display = 'none';
                            
                            // Refresh the current view
                            if (dashboardView.style.display === 'block') {
                                loadUserQrCodes();
                                updateUserStats();
                            } else if (adminView.style.display === 'block') {
                                loadAllQrCodes();
                                loadSystemStats();
                            }
                        }
                    });
                }
            }, 100);
            
            qrEditModal.style.display = 'flex';
        }

        // Notification function
        function showNotification(message, type = 'success') {
            const notificationEl = document.getElementById('notification');
            const icon = notificationEl.querySelector('.notification-icon i');
            const messageEl = notificationEl.querySelector('.notification-message');
            
            // Update notification content
            messageEl.textContent = message;
            
            // Update notification type
            notificationEl.className = 'notification show';
            if (type === 'error') {
                notificationEl.classList.add('error');
                icon.className = 'fas fa-exclamation-circle';
            } else {
                icon.className = 'fas fa-check-circle';
            }
            
            // Hide notification after 3 seconds
            setTimeout(() => {
                notificationEl.classList.remove('show');
            }, 3000);
        }

        // Initialize the application
        init();
    </script>
</body>
</html>