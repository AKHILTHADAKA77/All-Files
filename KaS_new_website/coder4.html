<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Edit Existing Code Snippets</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet" />

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
      padding: 2rem;
    }
    .form-container {
      background: #2b2c44;
      border-radius: 0.5rem;
      padding: 1.5rem 2rem;
      margin-bottom: 2rem;
      color: #e0e0e0;
      max-width: 700px;
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
    }
    .form-label {
      font-weight: 600;
      color: #4ea8ff;
    }
    input, select, textarea {
      background-color: #1f1f33;
      border: none;
      border-radius: 0.4rem;
      color: #ccc;
      font-family: 'Source Code Pro', monospace;
      font-size: 1rem;
      padding: 0.5rem 0.75rem;
      resize: vertical;
      margin-bottom: 1.5rem;
      transition: background-color 0.3s ease;
    }
    input::placeholder, textarea::placeholder {
      color: #555672;
      font-family: 'Source Code Pro', monospace;
    }
    input:focus, select:focus, textarea:focus {
      outline: 2px solid #4ea8ff;
      background-color: #292b44;
    }
    button.btn-primary {
      background-color: #4ea8ff;
      border: none;
      padding: 0.5rem 1.25rem;
      font-weight: 600;
      font-size: 1rem;
      border-radius: 0.4rem;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s ease;
    }
    button.btn-primary:hover {
      background-color: #1c7ed6;
    }
    .card {
      background: #2b2c44;
      border-radius: 0.5rem;
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
      margin-bottom: 1.5rem;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      height: 600px;
    }
    .card-header {
      background: #32334a;
      border-radius: 0.5rem 0.5rem 0 0;
      padding: 1rem 1.5rem;
      font-weight: 700;
      font-size: 1.25rem;
      color: #4ea8ff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      user-select: none;
    }
    .copyBtn {
      background-color: #4ea8ff;
      border: none;
      color: white;
      padding: 0.35rem 0.75rem;
      font-weight: 600;
      font-size: 0.9rem;
      border-radius: 0.4rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    .copyBtn:hover {
      background-color: #1c7ed6;
    }
    .copyBtn:focus-visible {
      outline: 3px solid #70cfff;
      outline-offset: 2px;
    }
    .copyBtn.success {
      background-color: #28a745 !important;
    }
    .copyBtn svg {
      transition: transform 0.3s ease;
    }
    .copyBtn.success svg {
      animation: pop 0.4s ease forwards;
    }
    @keyframes pop {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    pre.code-block {
      flex-grow: 1;
      margin: 0;
      padding: 1rem 1.25rem;
      background-color: #2b2c44;
      border-radius: 0 0 0.5rem 0.5rem;
      font-family: 'Source Code Pro', monospace;
      font-size: 0.9rem;
      line-height: 1.4;
      color: #e0e0e0;
      overflow: auto;
      scrollbar-width: thin;
      scrollbar-color: #4ea8ff #1f1f33;
      user-select: text;
      scroll-behavior: smooth;
    }
    pre.code-block::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    pre.code-block::-webkit-scrollbar-track {
      background: #1f1f33;
      border-radius: 10px;
    }
    pre.code-block::-webkit-scrollbar-thumb {
      background-color: #4ea8ff;
      border-radius: 10px;
      border: 2px solid #1f1f33;
    }
  </style>
</head>
<body>

  <div class="container">

    <form class="form-container" id="codeForm" aria-label="Edit code snippet form">
      <label for="codeTitle" class="form-label">Code Title</label>
      <input
        id="codeTitle"
        name="codeTitle"
        type="text"
        placeholder="Example: JavaScript Example"
        required
        autocomplete="off"
      />

      <label for="codeLanguage" class="form-label">Language</label>
      <select id="codeLanguage" name="codeLanguage" required>
        <option value="" disabled selected>Select language</option>
        <option value="markup">HTML</option>
        <option value="css">CSS</option>
        <option value="javascript">JavaScript</option>
      </select>

      <label for="codeContent" class="form-label">Code Content</label>
      <textarea
        id="codeContent"
        name="codeContent"
        placeholder="Paste your code here..."
        rows="10"
        required
        spellcheck="false"
      ></textarea>

      <button type="submit" class="btn btn-primary" aria-label="Update code snippet">Update Code Snippet</button>
    </form>

    <div class="row g-3" id="cardsContainer">

      <div class="col-lg-4 col-md-6" data-lang="markup">
        <div class="card">
          <div class="card-header" id="codeTitle1">
            HTML Example
            <button class="copyBtn" aria-describedby="copyStatus1" aria-live="polite" aria-label="Copy HTML code to clipboard" title="Copy HTML code">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true">
                <path d="M10 1.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1A1.5 1.5 0 0 0 4.5 3h7A1.5 1.5 0 0 0 13 1.5h-3z"/>
                <path d="M4 4h8a1 1 0 0 1 1 1v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a1 1 0 0 1 1-1z"/>
              </svg>
              <span>Copy</span>
            </button>
          </div>
          <pre tabindex="0" class="code-block language-markup" role="region" aria-labelledby="codeTitle1"><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Hello World!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
          </code></pre>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-lang="css">
        <div class="card">
          <div class="card-header" id="codeTitle2">
            CSS Example
            <button class="copyBtn" aria-describedby="copyStatus2" aria-live="polite" aria-label="Copy CSS code to clipboard" title="Copy CSS code">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true">
                <path d="M10 1.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1A1.5 1.5 0 0 0 4.5 3h7A1.5 1.5 0 0 0 13 1.5h-3z"/>
                <path d="M4 4h8a1 1 0 0 1 1 1v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a1 1 0 0 1 1-1z"/>
              </svg>
              <span>Copy</span>
            </button>
          </div>
          <pre tabindex="0" class="code-block language-css" role="region" aria-labelledby="codeTitle2"><code>body {
  background-color: #f0f0f0;
  font-family: Arial, sans-serif;
}
h1 {
  color: #333333;
  text-align: center;
}
          </code></pre>
        </div>
      </div>

      <div class="col-lg-4 col-md-6" data-lang="javascript">
        <div class="card">
          <div class="card-header" id="codeTitle3">
            JavaScript Example
            <button class="copyBtn" aria-describedby="copyStatus3" aria-live="polite" aria-label="Copy JavaScript code to clipboard" title="Copy JavaScript code">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16" aria-hidden="true">
                <path d="M10 1.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1A1.5 1.5 0 0 0 4.5 3h7A1.5 1.5 0 0 0 13 1.5h-3z"/>
                <path d="M4 4h8a1 1 0 0 1 1 1v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a1 1 0 0 1 1-1z"/>
              </svg>
              <span>Copy</span>
            </button>
          </div>
          <pre tabindex="0" class="code-block language-javascript" role="region" aria-labelledby="codeTitle3"><code>function helloWorld() {
  console.log("Hello, world!");
}
// Scrollable example content:
for (let i = 0; i &lt; 100; i++) {
  console.log(i);
}
          </code></pre>
        </div>
      </div>

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markup.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>

  <script>
    const form = document.getElementById('codeForm');
    const titleInput = document.getElementById('codeTitle');
    const languageSelect = document.getElementById('codeLanguage');
    const contentInput = document.getElementById('codeContent');

    // Map language to card data
    const cards = {
      markup: {
        container: document.querySelector('[data-lang="markup"]'),
        titleEl: document.getElementById('codeTitle1'),
        codeEl: document.querySelector('[data-lang="markup"] pre code'),
      },
      css: {
        container: document.querySelector('[data-lang="css"]'),
        titleEl: document.getElementById('codeTitle2'),
        codeEl: document.querySelector('[data-lang="css"] pre code'),
      },
      javascript: {
        container: document.querySelector('[data-lang="javascript"]'),
        titleEl: document.getElementById('codeTitle3'),
        codeEl: document.querySelector('[data-lang="javascript"] pre code'),
      }
    };

    // When language changes, update form with that card's data
    languageSelect.addEventListener('change', () => {
      const lang = languageSelect.value;
      if (!lang || !cards[lang]) return;

      const card = cards[lang];
      // Update form fields from card
      titleInput.value = card.titleEl.textContent.trim();
      contentInput.value = card.codeEl.textContent.trim();
    });

    form.addEventListener('submit', e => {
      e.preventDefault();
      const lang = languageSelect.value;
      if (!lang || !cards[lang]) {
        alert('Please select a valid language to edit.');
        return;
      }

      const card = cards[lang];
      // Update card title
      card.titleEl.textContent = titleInput.value;

      // Update code block content and language class
      card.codeEl.textContent = contentInput.value;
      // Update language classes on pre and code to make Prism highlight
      const preEl = card.codeEl.parentElement;
      preEl.className = `code-block language-${lang}`;
      card.codeEl.className = `language-${lang}`;

      // Re-run Prism highlight for updated code
      Prism.highlightElement(card.codeEl);
    });

    // Copy button logic for each card
    document.querySelectorAll('.copyBtn').forEach(btn => {
      btn.addEventListener('click', () => {
        const card = btn.closest('.card');
        const code = card.querySelector('pre code').textContent;
        navigator.clipboard.writeText(code).then(() => {
          btn.classList.add('success');
          btn.querySelector('span').textContent = 'Copied!';
          setTimeout(() => {
            btn.classList.remove('success');
            btn.querySelector('span').textContent = 'Copy';
          }, 1500);
        });
      });
    });
  </script>

</body>
</html>
